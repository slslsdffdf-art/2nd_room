<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<title>입구</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600&display=swap" rel="stylesheet">
<style>
  body{
    margin:0; padding:40px;
    font-family:'Noto Serif KR',serif; line-height:1.6;
    background:url('/css/images/parchment-bg.jpg') center/cover fixed no-repeat;
    color:#1d130b;
  }
  .wrap{ max-width:500px; margin:60px auto; background:rgba(255,255,255,.82); border-radius:12px; padding:24px; }
  h1{text-align:center}
  input{width:100%; padding:12px; font-size:18px; margin-top:12px}
  button{margin-top:12px; padding:12px; width:100%; font-size:18px; cursor:pointer}
  #msg{margin-top:8px; font-size:14px; color:#a00; text-align:center}
</style>
</head>
<body>
  <div class="wrap">
    <h1>비밀번호 입력</h1>
    <input id="pw" type="password" placeholder="Password">
    <button id="go">입장</button>
    <div id="msg"></div>
  </div>

<script>
const $=s=>document.querySelector(s), pw=$('#pw'), go=$('#go'), msg=$('#msg');

go.onclick=async ()=>{
  msg.textContent='확인중…';
  const cleaned=(pw.value||'').trim().normalize('NFKC');
  try{
    const r=await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({pw:cleaned})});
    const d=await r.json().catch(()=>({}));
    if(r.ok && d.ok){ location.href='/lobby.html'; }
    else msg.textContent=d.error||'비밀번호가 틀렸습니다.';
  }catch{ msg.textContent='네트워크 오류'; }
};
pw.addEventListener('keydown',e=>{ if(e.key==='Enter') go.click(); });

// 브금
window.BGM_SRC='/css/bgm/gate-theme.mp3';
</script>
<script src="/css/bgm/player.js"></script>
</body>
</html>
